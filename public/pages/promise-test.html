<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>

<body>
    <!--<script type="application/javascript" src="/javascripts/promise-test.js"></script>-->
    <script type="application/javascript" src="/javascripts/vendor/jquery.js"></script>
    <script type="application/javascript">
        // var promise = $.get('/api/data1');
        // promise
        //     .then(function (data) {
        //         console.log(data);
        //         return data;
        //     })
        //     .then(function (data) {
        //         console.log(data);
        //         var defer = $.Deferred();
        //         setTimeout(function () {
        //             defer.resolve("1");
        //         }, 2000);
        //         return defer.promise()
        //             .then(function (data) {
        //                 console.log(2);
        //                 return data;
        //             });

        //         //       return $.get('/api/data2').then(function(data){
        //         //           console.log(data);
        //         //       });
        //     }).then(function (data) {
        //         console.log(data);
        //     });
    var promise = (function () {
        var defer = $.Deferred(); 
        setTimeout(function () { 
            defer.resolve("1"); 
        }, 2000); 
        return defer.promise();
    } ());
    promise.then(function (data) {
        console.log(data);
        var defer = $.Deferred(); 
        setTimeout(function () { 
            defer.resolve("2:"+data); 
        }, 2000); 
        return defer.promise();
    }).then(function (data) {
        console.log(data);
    });
    </script>
</body>

</html>